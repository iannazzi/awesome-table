<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'/>

    <title>Awesome Table</title>
    <!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css" >-->
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">-->
    <link rel="stylesheet" href="style.css">

    <script src='../dist/awesome-table-dist.js'></script>
    <script src='../node_modules/jsuri/Uri.js'></script>
    <script src='../node_modules/urijs/src/URI.min.js'></script>

    <script src="commonColumnDefinitions.js"></script>

</head>
<body>
<a href="../index.html">Home</a>
<h1>Searchable Table</h1>
<div id='table'></div>
<h1>Testing Results</h1>
<div id='tdv'></div>
</body>
<style>
    #awesome-table_table {
        width: 850px;
    }
    #awesome-table_search {
        width: 850px;
    }
    #awesome-table_table thead th {
        font-size:12px;
    }
</style>
<script>
    //setup - get an instance of the table so we can set it up
    let datar = function (rows) {
        let d = [];
        for (let r = 0; r < rows; r++) {
            d[r] = {};
            d[r].name = r;
            d[r].date = '2018-01-01'
            d[r].select = r
            d[r].tree_select = r
            d[r].checkbox = 1;


        }
        return d;
    }
    let awesomeTable = new AwesomeTable.AwesomeTable('searchable');

    let column_definition = allOptions(awesomeTable);


    //get data.....
    //how do I specify the return data...
    //some one may ajax
    // in this case i just want to return some garbadge....


    //wrapper stuff...



    // get the parameters off the page
    let jsuri = new Uri(window.location.href )
    let urijs = URI(window.location.href )






    let config = {
        name: 'awesome-table',
        data: [],
        column_definition,
        row_calculations: [], //fired on .draw() good for updating cell values
        table_buttons: [],
        access: 'read', //read vs write
        onPageLoad: function(){
          //do I want this instead of setting a search query?


        },
        onSearchClick: function (query) {
            //partial functionality as page load.....

            console.log(query)
//            urijs.query(query);
//            console.log(urijs)
            window.location.assign('SearchableTable.html?' + awesomeTable.controller.uri.getQueryString())


            //go there with the query....
            //awesomeTable.renderSearchResults(datar(10))
        }


    }

    //setup how to handle incoming search query, getting data
    //this callback is used to return the data..... works pretty well....
    config.getData = function(search_query){

        console.log('what is the query?')
        console.log(search_query)
       // return false;
           return datar(100)
    }
    //these values are set by the page
    config.search_query =jsuri.query();
    config.number_of_records_available = 100;
    config.number_of_records_to_automatically_get = 200;

    //once everything is defined we can load up the config then render.....
    awesomeTable.loadConfiguration(config);
    awesomeTable.addTo('table')








    //test
    let passing = true;
    let handeled_errors = [];
    let errors = [];
    let expect_false, expect_true, test_val;
    let test;

    //check the search table rendered correctly
    let check = document.getElementsByName('awesome-table_checkbox').value;
//    console.log(check);



    //get a search value - check default search value

    //set a search value

    //press search and see results

    //send back zero results

    //search again


    // I was planning on stripping these out, but on second thought why --- this functionality will almost always be needed....




    //advanced features..... storage of search, populating values from the uri, call back function for retreiving data....

    //search storage ----- hmmm i think i want something else for this????? but I would love to deal with this here???

    //getData function? --- so the table would take a callback to gather the data... sounds messy?

    //load data from the url ---- also sounds messy, but wouldn't I always want that functionality so I can pass around pages?



</script>
